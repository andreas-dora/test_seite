<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landkarten einbinden</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <main>
        <section class="inhalt" id="inhalt"> 
            <h1>Karten einbinden</h1>
            <aside>
                <dl>
                    <dt>Meine Beispiele</dt>
                    <dd><a href="testMap.html">Test Map</a></dd>
                    <dd><a href="./traficOne/index.html" target="_blank">Traffic</a></dd>
                    <dd><a href="./geocoder/index.html" target="_blank">Geocoder</a></dd>
                    <dd><a href="./route1/index.html">Route mit Directions </a></dd>
                    <dd><a href="./route2/index.html">Route 2 (Better) </a></dd>
                    <dt>JS Bibliotheken</dt>
                    <a href="#leaflet">Leaflet</a>
                    <a href="#leaflet">MapBox</a>
                    <dd><a href="http://leaflet-extras.github.io/leaflet-providers/preview/index.html" target="_blank" rel="noopener noreferrer">Übersicht Kartenmaterial</a></dd>
                    <dd><a href="https://docs.mapbox.com/mapbox-gl-js/example/" target="_blank">Alle Beispiele</a></dd>
                    <dd><a href="https://docs.mapbox.com/help/tutorials/?" target="_blank">Alle Tutorials</a></dd>
                </dl>
            </aside>
        </section>
        <section id="leaflet">
            <h1>Leaflet.js</h1>
            <aside>
                <p>Leaflet.js ist eine einsteigerfreundliche Javascript Bibliothek. Da Leaflet kein eigenes Kartenmaterial zur Verfügung zur Verfügung stellt muss man auf Karten von Anbietern wie OpenStreetMap oder 
                    MapBox zurückgreifen. </p>
                
            </aside>
            <article></article>
        </section>
        <section id="mapbox"> 
            <h1>Mapbox</h1>
            <aside>
                <p>Mapbox nicht nur ein Anbieter von Kartenmaterial. Mit <strong>Mapbox GS JS</strong> 
                    stellt das Unternhemen auch eine Javascript zum Einbinden des Kartenmaterial zur Verfügung.
                 Diese Bibliothek bietet neben der einfachen Rutenplanung auch Lösungen für das <a href="#" target="_blank" rel="noopener noreferrer">Traveling Salesman Problem</a> 
                an. Kartenmaterial und Bibliothek stehen Entwicklen kostenfrei zur Verfügung</p>
                <p>Mit dem Online-Edidtor <a href="#" target="_blank" rel="noopener noreferrer">Mapbox Studio</a> Lassen sich Kartenlayouts individuellen Bedürfnissen anpassen.</p>
                <p>Von Hause aus stehen acht verschiedene <a href="https://docs.mapbox.com/api/maps/styles/" target="_blank" rel="noopener noreferrer">Karten</a> zur für die unteschiedlichsten Verwendungszwecke zur Verfügung, die sich im Studio individuell anpassen lassen</p>
                <p>Eine Reihe von <a href="#" target="_blank" rel="noopener noreferrer">Turorials</a> erleichtert den Einstieg</p>
                    <ul>
                        <li><a href="https://www.mapbox.com/" target="_blank" rel="noopener noreferrer">Homepage</a></li>
                        <li><a href="https://docs.mapbox.com/api/maps/styles/" target="_blank" rel="noopener noreferrer">Karten Typen</a></li>
                        <li><a href="https://docs.mapbox.com/help/tutorials/" target="_blank" rel="noopener noreferrer">Tutorials</a></li>
                    </ul>
            </aside>
            <article></article>
        </section>
        <section id="mB_1">
            <h1>Eine Karte einbinden</h1>
            <div class="flexBox">
                <aside>
                    <p>Bevor man auf seiner Webseite eine Mapbox-Karte einbinden kann, muss man sich eine Access-Tolken erstellen.
                         Für Darstellung und Funktionalität werden eine CSS- und eine Javascript-datei benötigt, die man im Header seiner Seite einbinden muss. 

                         
                    </p>
                </aside>
 
            </div>
<pre><code>
&lt;!DOCTYPE html&gt;
&lt;<span class="code__dType">html</span>&gt;
&lt;<span class="code__dType">head</span>&gt;
    &lt;<span class="code__dType">meta charset="utf-8"</span>&gt;
    &lt;<span class="code__dType">title>Display a map on a webpage</span>&lt;/title&gt;
    &lt;<span class="code__dType">meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;<span class="code__dType">link</span><span class="code__variable"> href</span>=<span class="code__string">"https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css"</span><span class="code__variable"> rel</span>=<span class="code__string">"stylesheet"</span>&gt;
    &lt;<span class="code__dType">link</span><span class="code__variable"> rel</span>=<span class="code__string">"stylesheet"</span><span class="code__variable"> href</span>=<span class="code__string">"style.css"</span>&gt;
    &lt;<span class="code__dType">script</span><span class="code__variable"> src</span>=<span class="code__string">"https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"</span>&gt;<span class="code__text"></span>&lt;/<span class="code__dType">script</span>&gt;
&lt;/<span class="code__dType">head</span>&gt;
&lt;<span class="code__dType">body</span>&gt;
    &lt;<span class="code__dType">div</span><span class="code__variable"> class</span>=<span class="code__string">"mapContainer"</span>&gt;
        &lt;<span class="code__dType">div</span><span class="code__variable"> class</span>=<span class="code__string">"map"</span><span class="code__variable"> id</span>=<span class="code__string">"map"</span>&gt;<span class="code__text"></span>&lt;/<span class="code__dType">div</span>&gt
    &lt;/<span class="code__dType">div</span>&gt;
    &lt;<span class="code__dType">script</span><span class="code__variable"> src</span>=<span class="code__string">"mapSketch.js"</span>&gt;<span class="code__text"></span>&lt;/<span class="code__dType">script</span>&gt;
    &lt;/<span class="code__dType">body</span>&gt;
    &lt;/<span class="code__dType">html</span>&gt;
</code></pre>
<div class="flexBox">
    <aside>
        <h3>Lokales CSS: <span class="hilite">style.css</span></h3>
        <p>Um die Karte ordentlich darzustellen müssen in der lokalen CSS-Datei noch ein paar Angaben gemacht werden. Die
            Kare soll in dem Div-Elemet id="map" eingebunden werden. Damit die Karte nicht ausfranst, wird sie mit <span class="hilite">position: absolute</span> in der 
            linken, oberen Ecke festgesetzt.</p>
        <p>Wird das Landkarten-div nicht direkt im HTML-Body platziert, muss dem Eltern-Element (hier "mapContainer") auf jeden Fall die
            Eigenschaft <span class="hilite">position:relative</span> zuweisen.</p>
        <p>Die Darstellung der Karte soll nicht durch Margin und Padding beeinträchtigt werden. Entweder setzt man die Werte nur für das Map Element auf "0" oder 
            gibt diese Werte, direkt für das gesamte Dokument vor.
        </p>    
    </aside>
    <article>
        <pre><code>*, *:before, *:after{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
.mapContainer{
    position: relative;
}
.map { 
    position: absolute; 
    top: 0; 
    bottom: 0; 
    width: 100%; 
}</code></pre>
    </article>
</div>
<div class="flexBox">
    <aside>
        <h3>Persönliches JS: <span class="hilite">mapSketch.js</span></h3>
        <p>In dieser Datei wird der MapBox-Zugangsschlüüssel 'accessToken' hinterlegt. In dem map-Objekt werden dann genauere
            Angaben über zur Karte gemacht. Die ID des HTML-Elements in das die Karte eingestzte werden soll, wird im Punkt 
            Container angegeben. Außederdem wird der gewünschte Kartenstil, der Mittelpunkt sowie das Zoom-Level der Karte angegeben.
        </p>
    </aside>
    <article>
<pre><code>mapboxgl.accessToken = 'DeinPersönlicherToken';
const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [-74.5, 40], 
    zoom: 9 
});</code></pre>
    </article>
</div>
        </section>
        <section>
            <h2>Makierungen einfügen</h2>
            <p>Mapbox bietet verschiedene Möglichkeiten einer Karte Makierungspunkte hinzuzufügen.</p>
            <div class="flexBox">
                <aside><h4>Hardcoded:</h4></aside>
                <article>
<pre><code>mapboxgl.accessToken = 'persönlcherKey';
const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/navigation-night-v1',
    center: [8.770833, 50.099444], 
    zoom: 13 
});

const marker1 = new mapboxgl.Marker()
.setLngLat([8.770833, 50.099444])
.addTo(map);

const marker2 = new mapboxgl.Marker({ 
    color: 'orange', 
    rotation: 45 
})
.setLngLat([8.760833, 50.08924])
.addTo(map);</code></pre>
                </article>
            </div>
        </section>
        <section>
            
            <h1>Nach Adressen suchen</h1>
            <p>Mit dem Forwardgeocoder kann man in der Datenbank der Mapbox.sdk nach Adressen suchen.
                Dazu muss im HTMT-Dokument zunächst die Mapbox.sdk eingebunden werden. 
           </p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;<span class="code__dType">html</span>&gt;
&lt;<span class="code__dType">head</span>&gt;
    &lt;<span class="code__dType">meta charset="utf-8"</span>&gt;
    &lt;<span class="code__dType">title>Display a map on a webpage</span>&lt;/title&gt;
    &lt;<span class="code__dType">meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;<span class="code__dType">link</span><span class="code__variable"> href</span>=<span class="code__string">"https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css"</span><span class="code__variable"> rel</span>=<span class="code__string">"stylesheet"</span>&gt;
    &lt;<span class="code__dType">link</span><span class="code__variable"> rel</span>=<span class="code__string">"stylesheet"</span><span class="code__variable"> href</span>=<span class="code__string">"style.css"</span>&gt;
    &lt;<span class="code__dType">script</span><span class="code__variable"> src</span>=<span class="code__string">"https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"</span>&gt;<span class="code__text"></span>&lt;/<span class="code__dType">script</span>&gt;
&lt;/<span class="code__dType">head</span>&gt;
&lt;<span class="code__dType">body</span>&gt;
    &lt;<span class="code__dType">div</span><span class="code__variable"> class</span>=<span class="code__string">"mapContainer"</span>&gt;
        &lt;div class="map" id="map"&lt;/div&gt;
    &lt;/<span class="code__dType">div</span>&gt;
    <strong>&lt;<span class="code__dType">script</span><span class="code__variable"> src</span>=<span class="code__string">"https://unpkg.com/@mapbox/mapbox-sdk/umd/mapbox-sdk.min.js"</span>&gt;<span class="code__text"></span>&lt;/<span class="code__dType">script</span>&gt</strong>
    &lt;script src="mapSketch.js">&lt;/script&gt;
&lt;/<span class="code__dType">body</span>&gt;
&lt;/<span class="code__dType">html</span>&gt;</code></pre>                    

<div class="flexBox">
    <aside>
        <h3><span class="hilite">mapSketch.js</span></h3>
        <p>Dieses Beispiel geht davon aus, dass die Karte mit der gesuchten Adresse im Mittelpunkt geladen werden soll. Es wird also zuerst 
            eine Suchanfrage gestellt und anschließend die Karte mit dem Ergebnis als Mittelpunnkt geladen. 
            Zuerst füttern wir den Mapbox-SDK-Zugang mit unserem Zugangsschlüüssel. Die Methode forwardGeocode() füttern wir nun mit
            den Details unserer Anfrage <strong>query: 'Wien, Östereich'</strong>. Wird forwardGeocode() fündigt erhalten wir ein 
            wunderbares Antwort-Objekt zurück welches wir hier unter 'feature' ablegen. Es lohnt sich in jedem Fall sich den Inhalt in der 
            Javascript-Console zu betrachten. Unter 'center' enthält das Objekt LngLat für den Mittelpunkt der Suchanfrage.</p>
            <p>Zu guter Letzt setzen wir noch einen Marker auf <strong>feature.center</strong></p> und fügen diesen der Karte zu.
            <dl>
                <dt>Links</dt>
                <dd><a href="https://docs.mapbox.com/api/search/geocoding/#forward-geocoding" target="_blank" rel="noopener noreferrer">Dokumentation</a></dd>
                <dd><a href="http://" target="_blank" rel="noopener noreferrer">Sandbox Playground</a></dd>
            </dl>
    </aside>
    <article>
        <pre><code>mapboxgl.accessToken = 'XXXXXXXXXXX';
const mapboxClient = mapboxSdk({ 
    accessToken: mapboxgl.accessToken 
});
mapboxClient.geocoding
    .forwardGeocode({
        <strong><span class="code__variable">query</span>: <span class="code__string">'Wien, Östereich'</span>,</strong>
        autocomplete: false,
        limit: 1
    })
    .send()
    .then((response) => {
    if (
        !response ||
        !response.body ||
        !response.body.features ||
        !response.body.features.length
    ) {
        console.error('Invalid response:');
        console.error(response);
        return;
    }
<strong>const feature = response.body.features[0];</strong>
const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    <strong>center: feature.center,</strong>
    zoom: 10
});

<strong>new mapboxgl.Marker().setLngLat(feature.center).addTo(map);</strong>
});</code></pre>
    </article>
</div>


        </section>
    </main>
</body>
</html>